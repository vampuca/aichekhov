<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Студия ИИ им. А.П. Чехова</title>
  <meta name="description" content="AI студия им. А.П. Чехова — графические новеллы, сериалы и экспериментальный контент. От идеи до готовой истории." />
  <link rel="preload" as="video" href="assets/video/background.mp4" type="video/mp4" />
  <link rel="stylesheet" href="style.css?v=21" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hanken+Grotesk:wght@100;300;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
  <!-- ВЕРХ -->
  <a class="brand" href="#top" aria-label="На начало">
    <img src="assets/img/logo.png" alt="Логотип студии" />
  </a>
  <nav class="top-nav" aria-label="Навигация по странице">
    <a href="#about">О нас</a>
    <a href="#projects">Проекты</a>
  </nav>
  <button class="contact-fixed" id="contactOpen" aria-haspopup="dialog" aria-controls="contactDrawer">Пишите нам</button>

  <!-- HERO -->
  <section id="top" class="hero" role="banner">
    <div class="hero-inner">
      <h1>Новый язык<br>сторителлинга</h1>
      <p class="subtitle">Первая в России творческая AI-студия, основанная профессионалами ТВ и кино.</p>
    </div>
  </section>

  <!-- О НАС + ВИДЕО -->
  <section class="about-video" id="about" aria-label="О нас">
    <video class="bg-video" autoplay muted loop playsinline poster="assets/img/poster.jpg">
      <source src="assets/video/background.mp4" type="video/mp4" />
    </video>
    <div class="video-overlay" aria-hidden="true"></div>

    <div class="about-content">
      <p>
        Мы видим в пришествии AI и генеративных моделей прорыв для индустрии развлечений, сравнимый с «Прибытием поезда». Это шанс для художника полностью управлять своим воображением и контролировать творческий процесс, освободившись от громоздкой административной цепочки традиционного производства.
        <br><br>
        Мы приглашаем вас сделать вместе с нами шаг в будущее, где точно не будет скучно. Апчхи.
      </p>
    </div>
  </section>

  <!-- Интро проектов -->
  <section class="section-intro" id="projects" aria-label="Интро проектов">
    <h2 class="section-title">AI студия им. А.П. Чехова</h2>
    <p class="section-subtitle">От идеи до готовой истории.</p>
  </section>

  <!-- Плитки проектов -->
  <section class="portfolio" aria-label="Проекты студии">
    <!-- Сериалы -->
    <a class="tile tile-video" href="assets/series/" aria-label="Сериалы">
      <video class="tile-bg" autoplay muted loop playsinline preload="metadata">
        <source src="assets/series/episode-1-preview.mp4" type="video/mp4" />
      </video>
      <div class="tile-overlay"></div>
      <div class="tile-title">Сериалы</div>
      <div class="tile-badge">Смотреть</div>
    </a>

    <!-- Графические новеллы -->
    <a class="tile tile-visual" href="assets/novellas/" aria-label="Графические новеллы">
      <img class="tile-bg-img" src="assets/novellas/novella-preview.jpg?v=11" alt="" />
      <div class="tile-overlay"></div>
      <div class="tile-title">Графические новеллы</div>
      <div class="tile-badge">В разработке</div>
    </a>

    <!-- AI-контент -->
    <a class="tile tile-video" href="assets/content/" aria-label="AI-контент">
      <video class="tile-bg" autoplay muted loop playsinline preload="metadata">
        <source src="assets/content/content-preview.mp4" type="video/mp4" />
      </video>
      <div class="tile-overlay"></div>
      <div class="tile-title">AI-контент</div>
      <div class="tile-badge">В разработке</div>
    </a>
  </section>

  <!-- Контакты -->
  <section class="contact-section" id="contact">
    <div class="contact">
      <a class="mail-link" href="mailto:studio@aichekhov.ru" aria-label="Написать на studio@aichekhov.ru">
        <svg class="mail-icon" viewBox="0 0 24 24" width="28" height="28" aria-hidden="true">
          <path d="M3 5h18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z" fill="none" stroke="currentColor" stroke-width="1.6"/>
          <path d="M3 7l9 6 9-6" fill="none" stroke="currentColor" stroke-width="1.6"/>
        </svg>
        <span class="mail-text">studio@aichekhov.ru</span>
      </a>
    </div>
  </section>

  <footer class="site-footer">
    <p>© <span id="year"></span> Студия искусственного интеллекта им. А.П. Чехова</p>
  </footer>

  <!-- Drawer -->
  <div class="scrim" id="scrim" hidden></div>
  <aside class="drawer" id="contactDrawer" role="dialog" aria-modal="true" hidden>
    <header class="drawer-head">
      <h3 id="contactTitle">Связаться с нами</h3>
      <button class="drawer-close" id="contactClose" aria-label="Закрыть">✕</button>
    </header>

    <!-- ФОРМА: Formspree -->
    <form
      class="contact-form"
      id="contactForm"
      action="https://formspree.io/f/mwpqzewk"
      method="POST">
      <label>Имя <input type="text" name="name" autocomplete="name" required></label>
      <label>Email <input type="email" name="email" autocomplete="email" required></label>
      <label>Сообщение <textarea name="message" rows="5" required></textarea></label>
      <input type="hidden" name="_subject" value="Сообщение со страницы aichekhov.ru" />
      <button type="submit" class="contact-submit">Отправить</button>
      <p class="contact-alt">Или напишите: <a class="contact-plain" href="mailto:studio@aichekhov.ru">studio@aichekhov.ru</a></p>
      <p id="contactStatus" class="contact-status" role="status" aria-live="polite"></p>
    </form>
  </aside>

  <script>
    // текущий год
    document.getElementById('year').textContent = new Date().getFullYear();

    // автозапуск превью после первого тапа/клика (iOS)
    function kick(){ document.querySelectorAll('video').forEach(v=>{ if(v.paused) v.play().catch(()=>{}); }); }
    document.addEventListener('touchend', kick, {once:true});
    document.addEventListener('click', kick, {once:true});

    // drawer
    (()=> {
      const openBtn = document.getElementById('contactOpen');
      const drawer  = document.getElementById('contactDrawer');
      const closeBtn= document.getElementById('contactClose');
      const scrim   = document.getElementById('scrim');

      function open(){
        drawer.hidden=false; scrim.hidden=false;
        requestAnimationFrame(()=>{
          drawer.classList.add('is-open');
          scrim.classList.add('is-visible');
          document.body.style.overflow='hidden';
        });
      }
      function close(){
        drawer.classList.remove('is-open');
        scrim.classList.remove('is-visible');
        document.body.style.overflow='';
        setTimeout(()=>{ drawer.hidden=true; scrim.hidden=true; }, 200);
      }
      openBtn.addEventListener('click', open);
      closeBtn.addEventListener('click', close);
      scrim.addEventListener('click', close);

      // отправка формы в Formspree через fetch (без переходов)
      const form   = document.getElementById('contactForm');
      const status = document.getElementById('contactStatus');

      form.addEventListener('submit', async (e)=>{
        e.preventDefault(); // не уходим со страницы
        status.textContent = 'Отправляем…';

        try {
          const resp = await fetch(form.action, {
            method: form.method,
            body: new FormData(form),
            headers: { 'Accept': 'application/json' }
          });

          if (resp.ok) {
            form.reset();
            status.textContent = 'Сообщение отправлено. Спасибо!';
            // закрыть шторку через 1.2с
            setTimeout(()=>{ status.textContent=''; close(); }, 1200);
          } else {
            const data = await resp.json().catch(()=> ({}));
            status.textContent = data.errors?.[0]?.message || 'Не получилось отправить. Попробуйте ещё раз.';
          }
        } catch {
          status.textContent = 'Сеть недоступна. Повторите попытку позже.';
        }
      });
    })();

    // убрать залипание активных ссылок
    document.querySelectorAll('.top-nav a.active').forEach(a=>a.classList.remove('active'));
  </script>

  <!-- ScrollSpy: активные пункты меню "О нас"/"Проекты" по скроллу -->
  <script>
  (function(){
    const nav = document.querySelector('.top-nav'); if (!nav) return;
    const links = Array.from(nav.querySelectorAll('a[href^="#"]'));
    const getId = a => (a.getAttribute('href') || '').replace('#','');
    const sections = links.map(a => document.getElementById(getId(a))).filter(Boolean);
    const hero = document.getElementById('top') || document.querySelector('.hero');

    // снимаем фокус после клика (iOS/Safari)
    links.forEach(a => a.addEventListener('click', () => a.blur()));

    function setActive(id){
      links.forEach(a => a.classList.toggle('active', getId(a) === id));
    }

    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const el = entry.target;
        if (el === hero) {
          if (entry.isIntersecting) links.forEach(a => a.classList.remove('active'));
          return;
        }
        if (entry.isIntersecting) setActive(el.id);
      });
    }, { rootMargin: '-35% 0px -55% 0px', threshold: 0.01 });

    if (hero) io.observe(hero);
    sections.forEach(sec => io.observe(sec));
  })();
  </script>
</body>
</html>
